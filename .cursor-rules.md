Princ√≠pios Fundamentais

diff
Copy
+ 5. Acessibilidade Priorit√°ria
+   - WCAG 2.1 AA como padr√£o m√≠nimo
+   - Testes autom√°ticos de contraste
+   - Navega√ß√£o por teclado obrigat√≥ria
Stack Tecnol√≥gica

diff
Copy
// Em PROIBIDOS:
+ - useState para dados complexos compartilhados
+ - Any type em TypeScript (configurar eslint-ban-types)
+ - Uso direto de localStorage sem abstra√ß√£o
Tratamento de Erros

diff
Copy
+ // Adicionar contexto adicional
+ errorMetadata: {
+   componentStack: string
+   timestamp: string
+   userID?: string
+ }
+ 
+ // Implementar fallback UI
+ <ErrorBoundary fallback={<MobileErrorScreen />}>
Pol√≠ticas RLS

diff
Copy
+ -- Adicionar para opera√ß√µes de UPDATE/DELETE
+ CREATE POLICY "Atualiza√ß√£o segura" ON clients
+ FOR UPDATE USING (auth.uid() = owner_id)
+ WITH CHECK (auth.uid() = owner_id);
+
+ -- Para tabelas relacionais
+ CREATE POLICY "Acesso a servi√ßos" ON services
+ USING (auth.uid() = owner_id);
Conven√ß√µes de C√≥digo

diff
Copy
+ // Padr√£o de Documenta√ß√£o:
+ /**
+  * @component
+  * @description Card de cliente mobile-first com a√ß√µes r√°pidas
+  * @prop {Client} client - Dados completos do cliente
+  * @prop {boolean} [compact] - Modo de exibi√ß√£o simplificada
+  * @example
+  * <ClientCard client={clientData} compact />
+  */
+
+ // Regra de Propriedades:
+ - Props booleanas devem usar padr√£o false
+ - Evitar props excessivas (>5 ‚Üí usar context)
Gerenciamento de Estado

diff
Copy
+ // Middlewares obrigat√≥rios:
+ create<ClientStore>()(
+   devtools(
+     persist(
+       /*...*/
+     )
+   )
+ )
+
+ // Tipagem avan√ßada:
+ type ClientActions = {
+   addClient: (client: Omit<Client, 'id'>) => Promise<void>
+   archiveClient: (id: string) => void
+ }
Diretivas Mobile-First

diff
Copy
+ 5. Design Adaptativo:
+   - Breakpoints: [320, 768, 1024, 1440]
+   - clamp() para escalas fluidas
+   - prefers-reduced-motion
+
+ 6. Gestos M√≥veis:
+   - Swipe actions em listas
+   - Long press para menus contextuais
+   - Edge swipe para navega√ß√£o
‚úÖ Vers√£o Aprimorada:
markdown
Copy
# Brow Studio Web - Diretrizes Atualizadas

## üöÄ Princ√≠pios Essenciais
1. **Mobile-First Radical**: Design iniciando em 320px
2. **TypeScript Estrito**: zero `any`, tipagem preditiva
3. **Seguran√ßa Total**: RLS + sanitiza√ß√£o de dados
4. **Performance Obsessiva**: LCP ‚â§1.2s, CLS=0
5. **Acessibilidade Inclusiva**: WCAG 2.1 AA+

## üõ† Stack Tecnol√≥gica
```ts
const stack = {
  core: {
    framework: "Next.js 14 (App Router)",
    state: {
      global: "Zustand + Immer",
      server: "React Query v5",
      forms: "React Hook Form + Zod"
    },
    styling: {
      base: "Tailwind CSS v3.4",
      components: "shadcn/ui",
      animations: "framer-motion"
    }
  },
  services: {
    auth: "Supabase Auth + OTP",
    database: "Supabase PostgreSQL",
    monitoring: "Sentry + Vercel Analytics"
  },
  quality: {
    testing: ["Jest", "Cypress", "Testing Library"],
    linting: ["ESLint", "Prettier", "SonarJS"],
    types: "TypeScript 5.3+"
  }
};
üõ° Seguran√ßa & Erros
ts
Copy
// Pol√≠ticas RLS Completas
create policy "Full client access" on clients
for all using (auth.uid() = owner_id)
with check (auth.uid() = owner_id);

// Tratamento de Erros Aprimorado
interface ErrorContext {
  code: 'AUTH' | 'DB' | 'VALIDATION';
  severity: 'low' | 'medium' | 'critical';
  userMessage: string;
}

export function handleError(error: unknown, context: ErrorContext) {
  // Implementa√ß√£o com m√©tricas e recovery
}
üì± Mobile-First Avan√ßado
tsx
Copy
// Component Pattern
const MobileAdaptiveComponent = () => (
  <div className="flex flex-col md:flex-row">
    <div className="md:hidden">{/* Mobile UI */}</div>
    <div className="hidden md:block">{/* Desktop Enh */}</div>
  </div>
);

// Gestos Espec√≠ficos
const swipeGestures = {
  left: () => {/* Delete action */},
  right: () => {/* Edit action */},
  threshold: 50 // pixels
};
üìä Performance Cr√≠tica
markdown
Copy
1. **Otimiza√ß√µes Obrigat√≥rias**
   - Imagens: WebP + AVIF + Lazy Load
   - Fontes: Subset + WOFF2
   - Code Splitting: Route-based
   - Cache: SWR + CDN Edge

2. **M√©tricas Alvo**
   - TTI: <3.5s (3G)
   - FID: <100ms
   - INP: <200ms
üìù Conven√ß√µes de C√≥digo
tsx
Copy
// Padr√£o de Componentes
interface ComponentProps {
  /** 
   * Modo de alta densidade para mobile 
   * @default false
   */
  dense?: boolean;
  // ... outras props
}

// Documenta√ß√£o Obrigat√≥ria
export const Component = () => {
  // JSDoc para hooks complexos
  /** @hook Gerenciamento de estado local */
  const [state] = useState();
}